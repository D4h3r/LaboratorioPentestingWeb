<div class="container">
  <h2>XSS Nivel Medio</h2>
  <p>Simulación Navegador</p>
  
  <div class="browser-simulation">
    <div class="url-bar">
      <input 
        type="text" 
        [(ngModel)]="payload" 
        (keydown.enter)="updateUrl()"
        placeholder="http://localhost:4200/assets/xss-vulnerable-page.html?img=x%20onerror=&quot;alert(1)&quot;" />
    </div>
    
    <iframe [src]="safeUrl" width="100%" height="500px"></iframe>
  </div>
  
  <div *ngIf="validationMessage">
    <p>{{ validationMessage }}</p>
  </div>

  <!-- Sección de Pistas -->
  <div class="tips">
    <h3>Pistas para completar el nivel:</h3>
    <ul>
      <li>Intenta usar un atributo HTML que pueda ejecutar JavaScript.</li>
      <li>Considera la función <code>alert</code> para demostrar la ejecución del script.</li>
      <li>Usa el evento <code>onerror</code> en una etiqueta de imagen para inyectar tu script.</li>
      <li>Asegúrate de que tu payload esté correctamente formateado con comillas adecuadas.</li>
    </ul>
  </div>

  <!-- Popup de Felicitaciones -->
  <div class="popup" *ngIf="showPopup">
    ¡Felicitaciones! Has completado el nivel.
  </div>

  <!-- Spinner de Carga -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner color="primary"></mat-spinner>
  </div>
</div>
