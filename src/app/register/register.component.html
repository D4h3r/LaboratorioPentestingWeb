<div class="register-form-container">
  <div class="register-box">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <div>
        <label for="name">Nombre:</label>
        <input type="text" formControlName="name">
        <div *ngIf="f['name'].errors?.['required'] && f['name'].touched" class="error-message">
          El nombre es requerido.
        </div>
      </div>
      <div>
        <label for="correo">Correo:</label>
        <input type="correo" formControlName="correo">
        <div *ngIf="f['correo'].errors?.['required'] && f['correo'].touched" class="error-message">
          El correo es requerido.
        </div>
        <div *ngIf="f['correo'].errors?.['email'] && f['correo'].touched" class="error-message">
          El formato del correo no es válido.
        </div>
      </div>
      <div>
        <label for="password">Contraseña:</label>
        <input type="password" formControlName="password">
        <div *ngIf="f['password'].errors?.['required'] && f['password'].touched" class="error-message">
          La contraseña es requerida.
        </div>
        <div *ngIf="f['password'].errors?.['minlength'] && f['password'].touched" class="error-message">
          La contraseña debe tener al menos 6 caracteres.
        </div>
      </div>
      <div>
        <label for="confirm-password">Confirmar Contraseña:</label>
        <input type="password" formControlName="confirmPassword">
        <div *ngIf="f['confirmPassword'].errors?.['required'] && f['confirmPassword'].touched" class="error-message">
          La confirmación de la contraseña es requerida.
        </div>
        <div *ngIf="f['confirmPassword'].errors?.['notSame'] && f['confirmPassword'].touched" class="error-message">
          Las contraseñas no coinciden.
        </div>
      </div>

      <div class="button-container">
        <button type="button" (click)="onCancelar()" class="button cancel-button">Cancelar</button>
        <button type="submit" [disabled]="!registerForm.valid || loading" class="button register-button">Registrar</button>
      </div>
    </form>

    <!-- Popup de Éxito -->
    <div *ngIf="showSuccessPopup" class="popup success-popup">
      Usuario creado correctamente. Redirigiendo...
    </div>

    <!-- Popup de Error -->
    <div *ngIf="showErrorPopup" class="popup error-popup">
      {{ errorMessage }}
    </div>

    <!-- Spinner de Carga -->
    <div *ngIf="loading" class="loading-container">
      <mat-spinner color="primary"></mat-spinner>
    </div>
  </div>
</div>
