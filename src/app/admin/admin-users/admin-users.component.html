<h2>Administrar Usuarios</h2>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Correo</th>
      <th>Niveles Completados</th>
      <th>Puntos</th>
      <th>Rol</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users">
      <td>{{ user.id }}</td>
      <td *ngIf="!user.isEditing">{{ user.Nombre }}</td>
      <td *ngIf="user.isEditing"><input [(ngModel)]="user.Nombre" /></td>
      
      <td *ngIf="!user.isEditing">{{ user.Correo }}</td>
      <td *ngIf="user.isEditing"><input [(ngModel)]="user.Correo" /></td>

      <td>
        <select [(ngModel)]="user.NivelesCompletados" *ngIf="user.isEditing" multiple>
          <option *ngFor="let nivel of nivelesDisponibles" [value]="nivel">{{ nivel }}</option>
        </select>
        <span *ngIf="!user.isEditing">{{ user.NivelesCompletados }}</span>
      </td>
      
      <td *ngIf="!user.isEditing">{{ user.Puntos }}</td>
      <td *ngIf="user.isEditing"><input type="number" [(ngModel)]="user.Puntos" /></td>

      <td *ngIf="!user.isEditing">{{ user.rol }}</td>
      <td *ngIf="user.isEditing">
        <select [(ngModel)]="user.rol">
          <option value="admin">admin</option>
          <option value="usuario">usuario</option>
        </select>
      </td>
      
      <td>
        <button *ngIf="!user.isEditing" (click)="startEditing(user)">Editar</button>
        <button *ngIf="user.isEditing" (click)="saveUser(user)">Guardar</button>
        <button (click)="deleteUser(user.id)">Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>
<p *ngIf="errorMessage" class="error">{{ errorMessage }}</p>
