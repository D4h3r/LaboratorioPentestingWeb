const express = require('express');
const router = express.Router();
const db = require('../backend/db'); // AsegÃºrate de que la ruta sea correcta

// Endpoint para obtener comentarios
router.get('/', (req, res) => {
  const query = 'SELECT * FROM Comments';
  db.all(query, (err, rows) => {
    if (err) {
      res.status(500).json({ success: false, message: 'Error obteniendo comentarios', error: err.message });
    } else {
      res.json(rows);
    }
  });
});

// Endpoint para agregar un comentario
router.post('/', (req, res) => {
  const { comment } = req.body;
  const query = 'INSERT INTO Comments (content) VALUES (?)';
  db.run(query, [comment], function(err) {
    if (err) {
      res.status(500).json({ success: false, message: 'Error agregando comentario', error: err.message });
    } else {
      res.json({ success: true, message: 'Comentario agregado', id: this.lastID });
    }
  });
});

module.exports = router;
